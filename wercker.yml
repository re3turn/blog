box: debian
build:
  steps:
    - install-packages:
        packages: git
    - script:
        name: download theme
        code: |
            $(git clone -b blog https://github.com/re3turn/beautifulhugo.git ./themes/beautifulhugo)
    - arjen/hugo-build:
        version: "0.42.1"
        theme: beautifulhugo
        flags: --buildDrafts=false
  steps:
    - script:
        name: copy staticman.yml
        code: |
            pwd
            ls -la
            cp -r ./staticman.yml ./public

deploy:
  steps:
    - install-packages:
        packages: git ssh-client curl
    - leipert/git-push:
        gh_oauth: $GIT_TOKEN
        repo: re3turn/blog
        branch: gh-pages
        basedir: public
    
