box: debian
build:
  steps:
    - install-packages:
        packages: git
    - script:
        name: download theme
        code: |
            $(git clone -b blog https://github.com/re3turn/beautifulhugo.git ./themes/beautifulhugo)
    - arjen/hugo-build:
        version: "0.68.3"
        theme: beautifulhugo
        flags: --buildDrafts=false
    - script:
        name: copy staticman.yml
        code: |
            pwd
            ls -la
            cp ./staticman.yml ./public

deploy:
  steps:
    - install-packages:
        packages: git ssh-client curl
    - add-ssh-key:
        keyname: WERCKER_SSH_KEY
        host: github.com
    - add-to-known_hosts:
        hostname: github.com
        fingerprint: 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48
    - leipert/git-push:
        gh_oauth: $GIT_TOKEN
        gh_pages: true
        basedir: public
    
