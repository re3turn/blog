box: debian
build:
  steps:
    - install-packages:
        packages: git
    - script:
        name: download theme
        code: |
            $(git clone https://github.com/halogenica/beautifulhugo.git ./themes/beautifulhugo)
    - arjen/hugo-build:
        version: "0.40.3"
        theme: beautifulhugo
        flags: --buildDrafts=false

deploy:
  steps:
    - install-packages:
        packages: git ssh-client curl
    - leipert/git-push:
        gh_oauth: $GIT_TOKEN
        repo: re3turn/blog
        branch: gh-pages
        basedir: public
    
